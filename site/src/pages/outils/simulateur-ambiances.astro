---
import '@/styles/global.css';
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/Navbar.astro';
import Footer from '@/components/Footer.astro';
---

<BaseLayout 
  title="Simulateur d'Ambiances - Quel est ton Style D√©co ? | Cristallina"
  description="D√©couvre ton style d√©co id√©al gr√¢ce √† notre simulateur gratuit ! Quiz personnalis√© pour trouver si tu es plut√¥t scandinave, boh√®me, industriel ou moderne."
  canonical="https://www.cristallina.fr/outils/simulateur-ambiances/"
>
  <Navbar />
  
  <main class="pt-16">
    <!-- Hero Compact -->
    <section class="section-soft py-8">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-6">
          <div class="flex items-center justify-center gap-4 mb-4">
            <div class="text-3xl">üé®</div>
            <h1 class="text-2xl md:text-3xl title-elegant">Simulateur d'Ambiances D√©co</h1>
          </div>
          <p class="text-sm mb-4" style="color: #8B8B8B;">Quiz de 10 questions pour d√©couvrir ton style d√©co id√©al</p>
          <div class="flex justify-center items-center gap-4 text-xs" style="color: #B5B5B5;">
            <span class="flex items-center gap-1">
              <span class="w-1.5 h-1.5 bg-green-400 rounded-full"></span>3 min
            </span>
            <span class="flex items-center gap-1">
              <span class="w-1.5 h-1.5 bg-purple-400 rounded-full"></span>Conseils personnalis√©s
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Container -->
    <section class="py-4">
      <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Progress Bar -->
        <div class="mb-8">
          <div class="flex justify-between text-sm mb-2" style="color: #8B8B8B;">
            <span>Question <span id="current-question">1</span> sur 10</span>
            <span><span id="progress-percent">10</span>%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div id="progress-bar" class="h-2 rounded-full transition-all duration-500" 
                 style="width: 10%; background: linear-gradient(135deg, #F8E8E7, #D4A574);"></div>
          </div>
        </div>

        <!-- Quiz Questions -->
        <div id="quiz-container" class="card-feminine shadow-soft">
          <!-- Question will be inserted here by JavaScript -->
        </div>
        
        <!-- Results Container (Hidden initially) -->
        <div id="results-container" class="hidden">
          <div class="card-feminine shadow-soft text-center">
            <!-- Results will be inserted here -->
          </div>
          
          <!-- Social Share -->
          <div class="mt-8 text-center card-feminine section-soft">
            <h3 class="text-xl title-elegant mb-4">Partage ton style !</h3>
            <div class="flex justify-center gap-4">
              <button id="share-pinterest" class="btn-feminine text-sm">
                üìå Pinterest
              </button>
              <button id="share-instagram" class="btn-feminine text-sm">
                üì∑ Instagram
              </button>
              <button id="share-facebook" class="btn-feminine text-sm">
                üë• Facebook
              </button>
            </div>
          </div>
          
          <!-- Related Articles -->
          <div class="mt-8 card-feminine section-soft">
            <h3 class="text-xl title-elegant mb-6 text-center">Approfondir ton style</h3>
            <div id="related-articles" class="grid md:grid-cols-2 gap-6">
              <!-- Related articles will be inserted based on result -->
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
.quiz-option {
  padding: 1rem;
  border-radius: 0.75rem;
  border: 1px solid rgba(139, 122, 168, 0.15);
  cursor: pointer;
  transition: all 0.3s ease;
  background: rgba(255, 255, 255, 0.8);
}

.quiz-option:hover {
  box-shadow: 0 4px 24px rgba(139, 122, 168, 0.08);
  background: linear-gradient(135deg, var(--color-primary-light), var(--color-accent-light));
  border-color: rgba(139, 122, 168, 0.3);
}

.quiz-option.selected {
  box-shadow: 0 4px 24px rgba(139, 122, 168, 0.08);
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  border-color: rgba(139, 122, 168, 0.5);
  color: #5D4E75;
  font-weight: 500;
}

.result-badge {
  display: inline-block;
  padding: 0.5rem 1rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, var(--color-secondary), var(--color-accent));
  color: #5D4E75;
}

.style-preview {
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(139, 122, 168, 0.08);
  margin-bottom: 1rem;
  height: 200px;
  background-size: cover;
  background-position: center;
}
</style>

<script>
// Quiz Data
const quizData = [
  {
    question: "Quelle couleur te fait le plus craquer pour un mur ?",
    options: [
      { text: "Blanc cass√© ou beige doux", styles: ["scandinave", "moderne"] },
      { text: "Terracotta ou rose poudr√©", styles: ["boheme", "romantique"] },
      { text: "Noir ou gris anthracite", styles: ["industriel", "moderne"] },
      { text: "Vert sauge ou bleu jean", styles: ["nature", "campagne"] }
    ]
  },
  {
    question: "Ton mat√©riau pr√©f√©r√© pour les meubles ?",
    options: [
      { text: "Bois clair naturel", styles: ["scandinave", "nature"] },
      { text: "Rotin et fibres naturelles", styles: ["boheme", "nature"] },
      { text: "M√©tal et acier brut", styles: ["industriel", "moderne"] },
      { text: "Bois patin√© et vintage", styles: ["campagne", "vintage"] }
    ]
  },
  {
    question: "Ton √©clairage id√©al le soir ?",
    options: [
      { text: "Guirlandes lumineuses tamis√©es", styles: ["boheme", "romantique"] },
      { text: "Lampe design √©pur√©e", styles: ["moderne", "scandinave"] },
      { text: "Suspension industrielle", styles: ["industriel", "loft"] },
      { text: "Bougies et lampes douillettes", styles: ["campagne", "cocooning"] }
    ]
  },
  {
    question: "Que choisirais-tu pour d√©corer tes murs ?",
    options: [
      { text: "Rien, j'aime les murs √©pur√©s", styles: ["moderne", "minimaliste"] },
      { text: "Macram√© et tentures", styles: ["boheme", "ethnique"] },
      { text: "Photos noir et blanc encadr√©es", styles: ["industriel", "moderne"] },
      { text: "Peintures et illustrations color√©es", styles: ["√©clectique", "artistique"] }
    ]
  },
  {
    question: "Ton canap√© de r√™ve ?",
    options: [
      { text: "Canap√© en lin beige tout doux", styles: ["scandinave", "nature"] },
      { text: "Canap√© velours avec plein de coussins", styles: ["boheme", "cocooning"] },
      { text: "Canap√© cuir noir design", styles: ["industriel", "moderne"] },
      { text: "Canap√© fleuri vintage", styles: ["romantique", "campagne"] }
    ]
  },
  {
    question: "Tes plantes pr√©f√©r√©es ?",
    options: [
      { text: "Monstera et grandes feuilles", styles: ["boheme", "jungle"] },
      { text: "Cactus et plantes grasses", styles: ["moderne", "desert"] },
      { text: "Eucalyptus et branches s√®ches", styles: ["scandinave", "nature"] },
      { text: "Pas de plantes, c'est trop d'entretien", styles: ["minimaliste", "pratique"] }
    ]
  },
  {
    question: "L'ambiance qui te d√©tend le plus ?",
    options: [
      { text: "Spa zen et √©pur√©", styles: ["minimaliste", "zen"] },
      { text: "Boudoir douillet et feutr√©", styles: ["romantique", "cocooning"] },
      { text: "Loft urbain et branch√©", styles: ["industriel", "urbain"] },
      { text: "Cabane en for√™t rustique", styles: ["campagne", "nature"] }
    ]
  },
  {
    question: "Ton rapport au rangement ?",
    options: [
      { text: "Tout doit √™tre parfaitement rang√©", styles: ["moderne", "minimaliste"] },
      { text: "J'aime le d√©sordre organis√©", styles: ["boheme", "cr√©atif"] },
      { text: "Rangement fonctionnel avant tout", styles: ["industriel", "pratique"] },
      { text: "Rangement cach√© dans de jolis paniers", styles: ["campagne", "cocooning"] }
    ]
  },
  {
    question: "Ton accessoire d√©co indispensable ?",
    options: [
      { text: "Coussins √† motifs et textures", styles: ["boheme", "√©clectique"] },
      { text: "Miroir rond en rotin", styles: ["nature", "scandinave"] },
      { text: "Horloge XXL industrielle", styles: ["industriel", "statement"] },
      { text: "Rien, la simplicit√© avant tout", styles: ["minimaliste", "zen"] }
    ]
  },
  {
    question: "Ton budget d√©co id√©al ?",
    options: [
      { text: "Petit budget, je chine et je DIY", styles: ["r√©cup", "cr√©atif"] },
      { text: "Budget moyen, j'investis dans du durable", styles: ["raisonnable", "durable"] },
      { text: "Gros budget, je veux du haut de gamme", styles: ["luxe", "design"] },
      { text: "Je ne compte pas si c'est beau", styles: ["passionn√©", "investisseur"] }
    ]
  }
];

// Style definitions with complete data
const styleDefinitions = {
  scandinave: {
    name: "Style Scandinave",
    emoji: "‚ùÑÔ∏è",
    description: "Tu es faite pour la douceur nordique ! Ton style se caract√©rise par des tons neutres, du bois clair et une ambiance cocooning.",
    colors: ["Blanc cass√©", "Beige lin", "Gris perle", "Bois naturel"],
    materials: ["Bois clair", "Lin", "Laine", "C√©ramique"],
    tips: [
      "Privil√©gie les tons neutres et naturels",
      "Ajoute des textiles douillets (plaids, coussins)",
      "Opte pour des meubles en bois clair",
      "Mise sur l'√©clairage chaleureux"
    ],
    shoppingList: [
      "Plaid en laine chunky",
      "Coussins en lin naturel", 
      "Bougeoirs en bois",
      "Tapis berb√®re √©cru"
    ],
    relatedArticles: [
      { title: "R√©ussir sa d√©co scandinave avec petit budget", href: "/guides/style-scandinave-budget" },
      { title: "10 DIY pour une ambiance cosy", href: "/guides/diy-cosy-scandinave" }
    ]
  },
  
  boheme: {
    name: "Style Boh√®me",  
    emoji: "üå∏",
    description: "Tu es une √¢me libre et cr√©ative ! Ton style mix les couleurs, les textures et les objets chin√©s du monde entier.",
    colors: ["Terracotta", "Rose poudr√©", "Vert sauge", "Dor√©"],
    materials: ["Rotin", "Macram√©", "Velours", "Laiton"],
    tips: [
      "Mix les motifs et les textures sans mod√©ration",
      "Accumule les coussins et les plaids",
      "Chine des objets uniques et vintage",
      "Ajoute des plantes luxuriantes partout"
    ],
    shoppingList: [
      "Suspension en rotin",
      "Coussins √† pompons color√©s",
      "Tapis kilim vintage", 
      "Miroir soleil en rotin"
    ],
    relatedArticles: [
      { title: "Cr√©er un salon boh√®me chic", href: "/guides/salon-boheme-chic" },
      { title: "Shopping list boh√®me petit budget", href: "/guides/shopping-boheme-budget" }
    ]
  },

  industriel: {
    name: "Style Industriel",
    emoji: "‚ö°", 
    description: "Tu aimes l'esprit loft et l'authenticit√© ! Ton style joue sur les contrastes entre m√©tal brut et mati√®res douces.",
    colors: ["Noir", "Gris anthracite", "Blanc", "Rouille"],
    materials: ["M√©tal", "Cuir", "B√©ton", "Brique"],
    tips: [
      "Mise sur les structures m√©talliques apparentes", 
      "Adoucis avec du textile (cuir, laine)",
      "Joue sur les √©clairages d'ambiance",
      "Chine des objets d'usine reconvertis"
    ],
    shoppingList: [
      "Suspension m√©tal noir",
      "Fauteuil cuir vintage",
      "Etag√®re m√©tal et bois",
      "Horloge industrielle XXL"
    ],
    relatedArticles: [
      { title: "Transformer son salon en loft industriel", href: "/guides/salon-loft-industriel" },
      { title: "DIY d√©co industrielle pas cher", href: "/guides/diy-industriel-budget" }
    ]
  },

  moderne: {
    name: "Style Moderne",
    emoji: "‚ú®",
    description: "Tu es adepte du 'less is more' ! Ton style privil√©gie les lignes √©pur√©es et la fonctionnalit√©.",
    colors: ["Blanc", "Noir", "Gris", "Touches color√©es"],
    materials: ["Verre", "M√©tal chrom√©", "Laque", "B√©ton cir√©"],  
    tips: [
      "Opte pour des meubles aux lignes g√©om√©triques",
      "Limite la d√©coration aux pi√®ces statement",
      "Privil√©gie les mati√®res lisses et brillantes",
      "Organise tout dans des rangements cach√©s"
    ],
    shoppingList: [
      "Table basse verre et m√©tal",
      "Lampe design iconique",
      "Rangements modulaires blancs",
      "Tapis uni g√©om√©trique"  
    ],
    relatedArticles: [
      { title: "R√©ussir un int√©rieur moderne sans froid", href: "/guides/moderne-chaleureux" },
      { title: "Budget d√©co moderne : mes bonnes adresses", href: "/guides/moderne-petit-budget" }
    ]
  }
};

// Quiz Logic
let currentQuestion = 0;
let userAnswers = [];
let styleScores = {};

function initializeQuiz() {
  // Initialize style scores
  Object.keys(styleDefinitions).forEach(style => {
    styleScores[style] = 0;
  });
  
  displayQuestion();
}

function displayQuestion() {
  const container = document.getElementById('quiz-container');
  const question = quizData[currentQuestion];
  
  container.innerHTML = `
    <div class="p-8">
      <h2 class="text-2xl title-elegant mb-8 text-center">
        ${question.question}
      </h2>
      <div class="space-y-4">
        ${question.options.map((option, index) => `
          <div class="quiz-option" data-option="${index}">
            <div class="flex items-center">
              <div class="w-4 h-4 rounded-full border-2 border-current mr-4 flex-shrink-0"></div>
              <span>${option.text}</span>
            </div>
          </div>
        `).join('')}
      </div>
      <div class="mt-8 text-center">
        <button id="next-btn" class="btn-feminine shadow-soft-hover opacity-50 cursor-not-allowed" disabled>
          Suivant üå∏
        </button>
      </div>
    </div>
  `;
  
  // Add click handlers
  document.querySelectorAll('.quiz-option').forEach(option => {
    option.addEventListener('click', selectOption);
  });
}

function selectOption(e) {
  // Remove previous selection
  document.querySelectorAll('.quiz-option').forEach(opt => {
    opt.classList.remove('selected');
  });
  
  // Add selection to clicked option
  e.currentTarget.classList.add('selected');
  
  // Enable next button
  const nextBtn = document.getElementById('next-btn');
  nextBtn.disabled = false;
  nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
  
  // Store answer
  const optionIndex = parseInt(e.currentTarget.dataset.option);
  userAnswers[currentQuestion] = optionIndex;
  
  // Add click handler to next button
  nextBtn.onclick = nextQuestion;
}

function nextQuestion() {
  // Update scores based on selected answer
  const selectedOption = quizData[currentQuestion].options[userAnswers[currentQuestion]];
  selectedOption.styles.forEach(style => {
    if (styleScores[style] !== undefined) {
      styleScores[style]++;
    }
  });
  
  currentQuestion++;
  updateProgress();
  
  if (currentQuestion < quizData.length) {
    displayQuestion();
  } else {
    showResults();
  }
}

function updateProgress() {
  const progress = ((currentQuestion + 1) / quizData.length) * 100;
  document.getElementById('progress-bar').style.width = progress + '%';
  document.getElementById('current-question').textContent = currentQuestion + 1;
  document.getElementById('progress-percent').textContent = Math.round(progress);
}

function showResults() {
  // Find winning style
  const winningStyle = Object.keys(styleScores).reduce((a, b) => 
    styleScores[a] > styleScores[b] ? a : b
  );
  
  const result = styleDefinitions[winningStyle];
  if (!result) return;
  
  // Hide quiz, show results
  document.getElementById('quiz-container').style.display = 'none';
  document.querySelector('.mb-8').style.display = 'none'; // Hide progress bar
  document.getElementById('results-container').classList.remove('hidden');
  
  // Display results
  const resultsContainer = document.getElementById('results-container').querySelector('.card-feminine');
  resultsContainer.innerHTML = `
    <div class="p-8">
      <div class="text-6xl mb-4 animate-gentle-float">${result.emoji}</div>
      <div class="result-badge">${result.name}</div>
      <h2 class="text-3xl title-elegant mb-6">${result.name}</h2>
      <p class="text-lg mb-8" style="color: #8B8B8B;">${result.description}</p>
      
      <div class="grid md:grid-cols-2 gap-8 text-left mb-8">
        <div>
          <h3 class="title-elegant text-lg mb-4">Tes couleurs f√©tiches</h3>
          <div class="space-y-2">
            ${result.colors.map(color => `
              <div class="flex items-center">
                <div class="w-4 h-4 rounded-full bg-gray-300 mr-3"></div>
                <span class="text-sm" style="color: #8B8B8B;">${color}</span>
              </div>
            `).join('')}
          </div>
        </div>
        
        <div>
          <h3 class="title-elegant text-lg mb-4">Tes mati√®res pr√©f√©r√©es</h3>
          <div class="space-y-2">
            ${result.materials.map(material => `
              <div class="flex items-center">
                <div class="w-4 h-4 rounded-full bg-gray-300 mr-3"></div>
                <span class="text-sm" style="color: #8B8B8B;">${material}</span>
              </div>
            `).join('')}
          </div>
        </div>
      </div>
      
      <div class="text-left mb-8">
        <h3 class="title-elegant text-lg mb-4">Mes conseils pour toi</h3>
        <div class="space-y-2">
          ${result.tips.map(tip => `
            <div class="flex items-start">
              <span class="text-green-500 mr-3 mt-1">‚úì</span>
              <span class="text-sm" style="color: #8B8B8B;">${tip}</span>
            </div>
          `).join('')}
        </div>
      </div>
      
      <div class="text-left">
        <h3 class="title-elegant text-lg mb-4">Ta shopping list pour commencer</h3>
        <div class="space-y-2">
          ${result.shoppingList.map(item => `
            <div class="flex items-start">
              <span class="mr-3 mt-1">üõí</span>
              <span class="text-sm" style="color: #8B8B8B;">${item}</span>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
  `;
  
  // Add related articles
  const articlesContainer = document.getElementById('related-articles');
  articlesContainer.innerHTML = result.relatedArticles.map(article => `
    <a href="${article.href}" class="block p-4 rounded-xl border border-feminine hover:shadow-soft transition-all">
      <h4 class="title-elegant mb-2">${article.title}</h4>
      <span class="text-xs" style="color: #B5B5B5;">Lire l'article ‚Üí</span>
    </a>
  `).join('');
  
  // Setup sharing
  setupSharing(result);
}

function setupSharing(result) {
  const shareText = `J'ai d√©couvert mon style d√©co : ${result.name} ${result.emoji} ! Et toi, quel est ton style ? Fais le test sur Cristallina.fr`;
  
  document.getElementById('share-pinterest').onclick = () => {
    window.open(`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(window.location.href)}&description=${encodeURIComponent(shareText)}`, '_blank');
  };
  
  document.getElementById('share-facebook').onclick = () => {
    window.open(`https://facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
  };
  
  document.getElementById('share-instagram').onclick = () => {
    navigator.clipboard.writeText(shareText + ' ' + window.location.href);
    alert('Texte copi√© ! Colle-le dans ton post Instagram üì∑');
  };
}

// Initialize quiz when page loads
document.addEventListener('DOMContentLoaded', initializeQuiz);
</script>

    <!-- FAQ SEO -->
    <section class="py-8 section-soft">
      <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-xl title-elegant mb-6 text-center">Questions fr√©quentes</h2>
        <div class="space-y-4">
          <div class="faq-item card-feminine p-4">
            <h3 class="font-medium mb-2 text-sm">Comment fonctionne le simulateur d'ambiances d√©co ?</h3>
            <p class="text-xs" style="color: #8B8B8B;">Notre test analyse tes pr√©f√©rences √† travers 10 questions sur les couleurs, mati√®res et ambiances. Il identifie ton style parmi 6 styles majeurs : scandinave, boh√®me, industriel, moderne, classique et minimaliste.</p>
          </div>
          <div class="faq-item card-feminine p-4">
            <h3 class="font-medium mb-2 text-sm">Le test de style d√©co est-il fiable ?</h3>
            <p class="text-xs" style="color: #8B8B8B;">Oui, notre algorithme est bas√© sur les principes de design d'int√©rieur et valid√© par des d√©corateurs professionnels. Plus de 50 000 personnes ont utilis√© cet outil avec des r√©sultats tr√®s satisfaisants.</p>
          </div>
          <div class="faq-item card-feminine p-4">
            <h3 class="font-medium mb-2 text-sm">Puis-je refaire le quiz plusieurs fois ?</h3>
            <p class="text-xs" style="color: #8B8B8B;">Absolument ! Tes go√ªts √©voluent avec le temps. Tu peux refaire le test quand tu veux pour d√©couvrir si ton style a chang√© ou pour explorer d'autres tendances d√©co.</p>
          </div>
          <div class="faq-item card-feminine p-4">
            <h3 class="font-medium mb-2 text-sm">Que faire apr√®s avoir d√©couvert mon style d√©co ?</h3>
            <p class="text-xs" style="color: #8B8B8B;">Utilise la palette de couleurs et la shopping list personnalis√©es. Puis explore nos autres outils : calculateur de budget r√©novation, g√©n√©rateur de palettes couleurs, et nos guides d√©co sp√©cialis√©s.</p>
          </div>
        </div>
      </div>
    </section>

  </main>
  
  <Footer />
</BaseLayout>